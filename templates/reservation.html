{% extends 'home.html'%}
{% block content %}
<div id="main-container" class="flex justify-center mt-20 min-h-screen">
    <div id="calendar-container" class="bg-white/30 backdrop-blur-lg p-6 rounded-lg shadow-lg w-[70%] min-h-[90%] h-120 mx-auto overflow-hidden">
        <div id="header" class="flex justify-between items-center mb-4">
            <button id="previous" class="text-gray-600 hover:text-black"><i class="fas fa-chevron-left cursor-pointer size-10"></i></button>
            <div id="current-month-year" class="text-lg font-bold"></div>
            <button id="next" class="text-gray-600 hover:text-black"><i class="fas fa-chevron-right cursor-pointer size-10"></i></button>
        </div>
        <div id="days" class="grid grid-cols-7 text-center font-bold mb-2">
            <p>Sun</p> 
            <p>Mon</p> 
            <p>Tue</p> 
            <p>Wed</p> 
            <p>Thu</p> 
            <p>Fri</p> 
            <p>Sat</p>
        </div>
        <div id="dates" class="grid grid-cols-7 gap-4 text-center"></div>
    </div>
</div>

<!-- Reservation Modal -->
<div id="modal" class="hidden fixed inset-0 bg-black/70 z-50 flex justify-center items-center transition-all duration-300 duration-300">
    <div id="modalContent" class="bg-gray-200 shadow-md p-5 rounded-lg w-[40%] transform scale-75 transition-all duration-300">
        <form action="">
            <h1 class="font-bold text-6xl text-center mb-4">Reservation</h1>
            <h2 id="thisday" class="font-semibold text-lg text-center"></h2>
            <div id="reserve-container">
                <label for="purpose">Purpose:</label>
                <select name="purpose">
                    <option value="" disabled selected>Select a Purpose</option>
                    <option value="Java programming">Java Programming</option>
                    <option value="C programming">C Programming</option>
                    <option value="C# programming">C# Programming</option>
                    <option value="Php programming">Php Programming</option>
                    <option value="ASP.Net programming">ASP.Net Programming</option>
                </select>
                <label for="">Lab</label>
                <select name="" id="">
                    <option value="" disabled selected>Select Laboratory</option>
                    <option value="542">542</option>
                    <option value="542">524</option>
                    <option value="542">526</option>
                    <option value="542">528</option>
                    <option value="542">530</option>
                    <option value="542">Mac Laboratory</option>
                </select>
            </div>
        </form>
    </div>
</div>


<script>
    const monthYear = document.getElementById('current-month-year');
    const datesContainer = document.getElementById('dates');
    const prevBtn = document.getElementById('previous');
    const nextBtn = document.getElementById('next');
    const modal = document.getElementById('modal')
    const dateElement = document.getElementById('thisday');
    let currentDate = new Date();

    function generateCalendar(date) {
        datesContainer.innerHTML = '';
        const year = date.getFullYear();
        const month = date.getMonth();
        monthYear.textContent = new Intl.DateTimeFormat('en-US', { month: 'long', year: 'numeric' }).format(date);
        
        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();
        
        for (let i = 0; i < firstDay; i++) {
            datesContainer.innerHTML += '<div></div>'; // Empty spaces
        }
        
        for (let day = 1; day <= lastDate; day++) {
            const dateElem = document.createElement('div');
            dateElem.textContent = day;
            dateElem.className = "cursor-pointer p-2 rounded hover:bg-gray-300 h-[45px]";
            dateElem.addEventListener('click', () => {
                const monthName = new Date(year, month).toLocaleString('en-US', { month: 'long' });
                console.log(`Selected date: ${month + 1}/${day}/${year}`)
                modal.classList.toggle('hidden')
                dateElement.textContent = `Selected Date: ${ monthName } ${day} ${year}`;
            });
            datesContainer.appendChild(dateElem);
        }
    }
    
    prevBtn.addEventListener('click', () => {
        currentDate.setMonth(currentDate.getMonth() - 1);
        generateCalendar(currentDate);
    });
    
    nextBtn.addEventListener('click', () => {
        currentDate.setMonth(currentDate.getMonth() + 1);
        generateCalendar(currentDate);
    });

    window.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.classList.toggle('hidden');
        }
    });
    
    generateCalendar(currentDate);
</script>
{% endblock %}